<% layout('layouts/boilerplate')%>
<h1 class="text-center mb-4">Report Pet</h1>
<form action="/pets" method="POST" novalidate class="row g-3" enctype="multipart/form-data" id="pet-form">
  <!-- Pet Status -->
  <div class="col-md-4">
    <label class="form-label" for="petStatus"><%= petsLocale.filterPetStatus %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-question-diamond"></i>
      </span>
      <select class="form-select" id="petStatus" required name="pet[petStatus]">
        <% statusOptions.forEach(option => { %>
        <option value="<%= option.value %>"><%= option.text %></option>
        <% }); %>
      </select>
    </div>
  </div>

  <!-- Pet Species -->
  <div class="col-md-4">
    <label class="form-label" for="species"><%= petsLocale.filterSpecies %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-diamond-half"></i>
      </span>
      <select class="form-select" id="species" name="pet[species]" required form="pet-form">
        <% speciesOptions.forEach(option => { %>
        <option value="<%= option.value %>"><%= option.text %></option>
        <% }); %>
      </select>
    </div>
  </div>

  <!-- Pet Gender -->
  <div class="col-md-4">
    <label class="form-label" for="gender"><%= petsLocale.filterPetGender %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-gender-ambiguous"></i>
      </span>

      <select class="form-select" id="gender" name="pet[gender]">
        <% genderOptions.forEach(option => { %>
        <option value="<%= option.value %>"><%= option.text %></option>
        <% }); %>
      </select>
    </div>
  </div>

  <!-- Age -->
  <div class="col-md-4">
    <label class="form-label" for="age"><%= petsLocale.filterPetAge %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-calendar2-heart"></i>
      </span>
      <select class="form-select" id="age" name="pet[age]">
        <% ageOptions.forEach(option => { %>
        <option value="<%= option.value %>"><%= option.text %></option>
        <% }); %>
      </select>
    </div>
  </div>

  <!-- Pet identifier -->
  <div class="col-md-4">
    <label class="form-label" for="identifier"><%= petsLocale.filterIdentifier %></label>
    <div class="input-group">
      <span class="input-group-text"><i class="bi bi-fingerprint"></i></span>
      <input type="number" class="form-control identifier" id="identifier" min="0" name="pet[identifier]" value="" autocomplete="off" />
    </div>
  </div>

  <!-- Lost Date -->
  <div class="col-md-4">
    <label class="form-label" for="lostdate"><%= petsLocale.filterLostDate %></label>
    <div class="input-group">
      <span class="input-group-text"><i class="bi bi-calendar3"></i></span>
      <input type="date" class="form-control lostdate" id="lostdate" name="pet[lostdate]" min="2023-01-01" value="" required />
    </div>
  </div>

  <!-- map -->
  <div id="map" style="max-width: 100%; height: 300px; background-color: #808080"></div>

  <div class="col-md-2 col-sm-3 col-6 mb-3 d-none">
    <label class="form-label me-1" for="latitude">Latitude</label>
    <input id="latitude" class="form-control text-muted" type="number" aria-label="latitude" aria-describedby="latitude-label" name="pet[latitude]" />
    <div class="valid-feedback">Looks good!</div>
  </div>

  <div class="col-md-2 col-sm-3 col-6 mb-3 d-none">
    <label class="form-label me-1" for="longitude">Longitude</label>
    <input id="longitude" class="form-control text-muted" type="number" aria-label="longitude" aria-describedby="longitude-label" name="pet[longitude]" />
    <div class="valid-feedback">Looks good!</div>
  </div>

  <!-- Coat type -->
  <div class="col-md-4">
    <label class="form-label" for="coat"><%= petsLocale.filterCoatType %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-wind"></i>
      </span>
      <select class="form-select" id="coat" name="pet[coat]">
        <% coatOptions.forEach(option => { %>
        <option value="<%= option.value %>"><%= option.text %></option>
        <% }); %>
      </select>
    </div>
  </div>

  <!-- Pet size -->
  <div class="col-md-4">
    <label class="form-label" for="size"><%= petsLocale.filterPetSize %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-arrows-angle-expand"></i>
      </span>

      <select class="form-select" id="size" name="pet[size]">
        <% sizeOptions.forEach(option => { %>
        <option value="<%= option.value %>"><%= option.text %></option>
        <% }); %>
      </select>
    </div>
  </div>
  <!-- Pet coat pattern -->
  <div class="col-md-4">
    <label class="form-label" for="pattern"><%= petsLocale.filterPattern %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-grid-3x3-gap"></i>
      </span>

      <select class="form-select" id="pattern" name="pet[pattern]">
        <% coatPatternOptions.forEach(option => { %>
        <option value="<%= option.value %>"><%= option.text %></option>
        <% }); %>
      </select>
    </div>
  </div>

  <!-- Pet coat color1 -->
  <div class="col-md-4">
    <label class="form-label" for="firstcolor"><%= petsLocale.filterMainColor %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-palette"></i>
      </span>
      <select class="form-select" id="firstcolor" form="pet-form" name="pet[firstcolor]">
        <% colorOptions.forEach(option => { %>
        <option value="<%= option.value %>"><%= option.text %></option>
        <% }); %>
      </select>
      <!-- <div class="valid-feedback">Looks good!</div> -->
    </div>
  </div>
  <!-- Pet coat color2 -->
  <div class="col-md-4">
    <label class="form-label" id="secondcolorLabel" for="secondcolor"><%= petsLocale.filterSecondColor %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-palette"></i>
      </span>
      <select class="form-select" id="secondcolor" form="pet-form" name="pet[secondcolor]">
        <% colorOptions.forEach(option => { %>
        <option value="<%= option.value %>"><%= option.text %></option>
        <% }); %>
      </select>
    </div>
  </div>

  <!-- Pet coat color3 -->
  <div class="col-md-4">
    <label class="form-label" for="thirdcolor"><%= petsLocale.filterThirdColor %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-palette"></i>
      </span>
      <select class="form-select" id="thirdcolor" form="pet-form" name="pet[thirdcolor]">
        <% colorOptions.forEach(option => { %>
        <option value="<%= option.value %>"><%= option.text %></option>
        <% }); %>
      </select>
    </div>
  </div>

  <div class="col-md-4">
    <label class="form-label" for="name"><%= petsLocale.filterName %></label>
    <!-- change name attr to name later -->
    <div class="input-group">
      <span class="input-group-text"><i class="bi bi-chat-dots"></i></span>
      <input name="pet[title]" type="text" class="form-control" id="name" autocomplete="off" />
      <!-- <small class="form-text text-muted"></small> -->
      <!-- <div class="valid-feedback">Looks good!</div> -->
    </div>
  </div>

  <!-- Pet Breed -->
  <div class="col-md-4">
    <label class="form-label"><%= petsLocale.filterBreed %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-x-diamond-fill"></i>
      </span>
      <select class="form-select" id="petBreed" name="breed">
        <option value="<%= breedsOptions.all[0].value %>"><%= breedsOptions.all[0].text %></option>
        <optgroup label="<%= breedsOptions.catOptiongroupLabel[0].text %>">
          <% breedsOptions.cats.forEach(option => { %>
          <option value="<%= option.value %>"><%= option.text %></option>
          <% }); %>
        </optgroup>
        <optgroup label="<%= breedsOptions.dogOptiongroupLabel[0].text %>">
          <% breedsOptions.dogs.forEach(option => { %>
          <option value="<%= option.value %>"><%= option.text %></option>
          <% }); %>
        </optgroup>
      </select>
    </div>
  </div>

  <div class="col-md-12 mb-3">
    <label class="form-label" for="description"><%= petsLocale.filterDescription %></label>
    <textarea maxlength="400" style="resize: none; height: 140px" class="form-control txt-area" type="text" id="description" name="pet[description]" placeholder="Max 400 characters" required></textarea>
    <div class="valid-feedback">Looks good!</div>
  </div>

  <div class="col-md-12 mb-3">
    <label for="image" class="form-label"><%= petsLocale.filterUploadImages %></label>
    <input class="form-control" type="file" id="image" name="image" multiple accept="image/png, image/jpeg, image/jpg" />
  </div>
  <div class="mb-2"><a class="btn btn-secondary me-3" href="/pets">Go Back</a><button class="btn btn-success">Add Pet</button></div>
</form>

<div class="alert alert-success d-flex align-items-center" role="alert">
  <svg class="bi flex-shrink-0 me-2" role="img" aria-label="Success:" style="height: 1.5rem; width: 1.5rem" fill="#198754">
    <use xlink:href="#info-fill" />
  </svg>
  <div>NOTE: this will be made public, please do not provide sensitive information that you would like kept private</div>
</div>

<script>
  const TOMTOMTOKEN = '<%-process.env.TOMTOM_API_KEY%>';
</script>
<script src="/javascripts/formMap.js"></script>
