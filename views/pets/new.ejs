<% layout('layouts/boilerplate')%>
<h1 class="text-center mb-4"><%= reportPetPage.titles.section1 %></h1>
<form action="/pets" method="POST" novalidate class="row g-3" enctype="multipart/form-data" id="pet-form">
  <!-- Pet Status -->
  <div class="col-md-4">
    <label class="form-label" for="petStatus"><%= reportPetPage.labels.petStatus %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-question-diamond"></i>
      </span>
      <select class="form-select" id="petStatus" required name="pet[petStatus]">
        <% selectOptions.status.forEach(option => { %>
        <option value="<%= option.value %>"><%= option.text %></option>
        <% }); %>
      </select>
    </div>
  </div>

  <!-- Pet Species -->
  <div class="col-md-4">
    <label class="form-label" for="species"><%= reportPetPage.labels.petSpecies %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-diamond-half"></i>
      </span>
      <select class="form-select" id="species" name="pet[species]" required form="pet-form">
        <% selectOptions.species.forEach(option => { %>
        <option value="<%= option.value %>"><%= option.text %></option>
        <% }); %>
      </select>
    </div>
  </div>

  <!-- Pet Gender -->
  <div class="col-md-4">
    <label class="form-label" for="gender"><%= reportPetPage.labels.petGender %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-gender-ambiguous"></i>
      </span>

      <select class="form-select" id="gender" name="pet[gender]">
        <% selectOptions.gender.forEach(option => { %>
        <option value="<%= option.value %>"><%= option.text %></option>
        <% }); %>
      </select>
    </div>
  </div>

  <!-- Age -->
  <div class="col-md-4">
    <label class="form-label" for="age"><%= reportPetPage.labels.petAge %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-calendar2-heart"></i>
      </span>
      <select class="form-select" id="age" name="pet[age]">
        <% selectOptions.age.forEach(option => { %>
        <option value="<%= option.value %>"><%= option.text %></option>
        <% }); %>
      </select>
    </div>
  </div>

  <!-- Pet identifier -->
  <div class="col-md-4">
    <label class="form-label" for="identifier"><%= reportPetPage.labels.petIdentifier %></label>
    <div class="input-group">
      <span class="input-group-text"><i class="bi bi-fingerprint"></i></span>
      <input type="number" class="form-control identifier" id="identifier" min="0" name="pet[identifier]" value="" autocomplete="off" />
    </div>
  </div>

  <!-- Lost Date -->
  <div class="col-md-4">
    <label class="form-label" for="lostdate"><%= reportPetPage.labels.petLostOrFoundDate %></label>
    <div class="input-group">
      <span class="input-group-text"><i class="bi bi-calendar3"></i></span>
      <input type="date" class="form-control lostdate" id="lostdate" name="pet[lostdate]" min="2023-01-01" value="<%= (new Date()).toISOString().split('T')[0] %>" required />
    </div>
  </div>

  <!-- map -->
  <div class="col-md-12">
    <label class="form-label" for="map"><%= reportPetPage.labels.petMap %></label>
    <div id="map" style="max-width: 100%; height: 300px; background-color: #808080"></div>
  </div>
  <div class="col-md-2 col-sm-3 col-6 mb-3 d-none">
    <label class="form-label me-1" for="latitude">Latitude</label>
    <input id="latitude" class="form-control text-muted" type="number" aria-label="latitude" aria-describedby="latitude-label" name="pet[latitude]" />
    <div class="valid-feedback">Looks good!</div>
  </div>

  <div class="col-md-2 col-sm-3 col-6 mb-3 d-none">
    <label class="form-label me-1" for="longitude">Longitude</label>
    <input id="longitude" class="form-control text-muted" type="number" aria-label="longitude" aria-describedby="longitude-label" name="pet[longitude]" />
    <div class="valid-feedback">Looks good!</div>
  </div>

  <!-- Coat type -->
  <div class="col-md-4">
    <label class="form-label" for="coat"><%= reportPetPage.labels.petCoatType %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-wind"></i>
      </span>
      <select class="form-select" id="coat" name="pet[coat]">
        <% selectOptions.coat.forEach(option => { %>
        <option value="<%= option.value %>"><%= option.text %></option>
        <% }); %>
      </select>
    </div>
  </div>

  <!-- Pet size -->
  <div class="col-md-4">
    <label class="form-label" for="size"><%= reportPetPage.labels.petSize %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-arrows-angle-expand"></i>
      </span>

      <select class="form-select" id="size" name="pet[size]">
        <% selectOptions.size.forEach(option => { %>
        <option value="<%= option.value %>"><%= option.text %></option>
        <% }); %>
      </select>
    </div>
  </div>
  <!-- Pet coat pattern -->
  <div class="col-md-4">
    <label class="form-label" for="pattern"><%= reportPetPage.labels.petCoatPattern %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-grid-3x3-gap"></i>
      </span>

      <select class="form-select" id="pattern" name="pet[pattern]">
        <% selectOptions.pattern.forEach(option => { %>
        <option value="<%= option.value %>"><%= option.text %></option>
        <% }); %>
      </select>
    </div>
  </div>

  <!-- Pet coat color1 -->
  <div class="col-md-4">
    <label class="form-label" for="firstcolor"><%= reportPetPage.labels.petColor1 %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-palette"></i>
      </span>
      <select class="form-select" id="firstcolor" form="pet-form" name="pet[firstcolor]">
        <% selectOptions.color.forEach(option => { %>
        <option value="<%= option.value %>"><%= option.text %></option>
        <% }); %>
      </select>
      <!-- <div class="valid-feedback">Looks good!</div> -->
    </div>
  </div>
  <!-- Pet coat color2 -->
  <div class="col-md-4">
    <label class="form-label" id="secondcolorLabel" for="secondcolor"><%= reportPetPage.labels.petColor2 %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-palette"></i>
      </span>
      <select class="form-select" id="secondcolor" form="pet-form" name="pet[secondcolor]">
        <% selectOptions.color.forEach(option => { %>
        <option value="<%= option.value %>"><%= option.text %></option>
        <% }); %>
      </select>
    </div>
  </div>

  <!-- Pet coat color3 -->
  <div class="col-md-4">
    <label class="form-label" for="thirdcolor"><%= reportPetPage.labels.petColor3 %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-palette"></i>
      </span>
      <select class="form-select" id="thirdcolor" form="pet-form" name="pet[thirdcolor]">
        <% selectOptions.color.forEach(option => { %>
        <option value="<%= option.value %>"><%= option.text %></option>
        <% }); %>
      </select>
    </div>
  </div>

  <div class="col-md-4">
    <label class="form-label" for="name"><%= reportPetPage.labels.petName %></label>
    <!-- change name attr to name later -->
    <div class="input-group">
      <span class="input-group-text"><i class="bi bi-chat-dots"></i></span>
      <input name="pet[title]" type="text" class="form-control" id="name" autocomplete="off" />
      <!-- <small class="form-text text-muted"></small> -->
      <!-- <div class="valid-feedback">Looks good!</div> -->
    </div>
  </div>

  <!-- Pet Breed -->
  <div class="col-md-4">
    <label class="form-label"><%= reportPetPage.labels.petBreed %></label>
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-x-diamond-fill"></i>
      </span>
      <select class="form-select" id="petBreed" name="pet[breed]">
        <option value="<%= selectOptions.breed.all[0].value %>"><%= selectOptions.breed.all[0].text %></option>
        <optgroup label="<%= selectOptions.breed.catOptiongroupLabel[0].text %>">
          <% selectOptions.breed.cats.forEach(option => { %>
          <option value="<%= option.value %>"><%= option.text %></option>
          <% }); %>
        </optgroup>
        <optgroup label="<%= selectOptions.breed.dogOptiongroupLabel[0].text %>">
          <% selectOptions.breed.dogs.forEach(option => { %>
          <option value="<%= option.value %>"><%= option.text %></option>
          <% }); %>
        </optgroup>
      </select>
    </div>
  </div>

  <div class="col-md-12 mb-3">
    <label class="form-label" for="description"><%= reportPetPage.labels.petDescription %></label>
    <textarea maxlength="400" style="resize: none; height: 140px" class="form-control txt-area" type="text" id="description" name="pet[description]" placeholder="Max 400 characters" required></textarea>
    <div class="valid-feedback">Looks good!</div>
  </div>

  <div class="col-md-12 mb-3">
    <label for="image" class="form-label"><%= reportPetPage.labels.petImages %></label>
    <input class="form-control" type="file" id="image" name="image" multiple accept="image/png, image/jpeg, image/jpg" />
  </div>
  <div class="mb-2"><a class="btn btn-secondary me-3" href="/pets"><%= reportPetPage.buttons.goBack %></a><button class="btn btn-success"><%= reportPetPage.buttons.addPet %></button></div>
</form>

<div class="alert alert-success d-flex align-items-center" role="alert">
  <svg class="bi flex-shrink-0 me-2" role="img" aria-label="Success:" style="height: 1.5rem; width: 1.5rem" fill="#198754">
    <use xlink:href="#info-fill" />
  </svg>
  <div><%= reportPetPage.notifications.note %> <%= reportPetPage.notifications.notification %></div>
</div>

<script>
  const TOMTOMTOKEN = '<%-process.env.TOMTOM_API_KEY%>';
</script>
<script src="/javascripts/formMap.js"></script>
